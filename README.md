RALib
=========================

RALib is a library for active learning algorithms for register automata
(a form of extended finite state machines). RALib is licensed under
the [*Apache License, Version 2.0*][4]. 

RALib is developed as an extension to [*LearnLib*][3]. It implements 
the SL* algorithm presented in 	Sofia Cassel, Falk Howar, Bengt Jonsson, 
Bernhard Steffen: Learning Extended Finite State Machines. SEFM 2014: 250-264.


Branch Information and Structure
-------------------------

This is an experimental yet stable branch of RALib supporting the following theories:
* theories with equalities over (max 2) sum constants, with support for fresh values and free value suffix optimization
* theories with inequalities over (max 2) sum constants, with support for special fresh values, which always increase, aing to TCP's sequence numbers

Implementations of these theories are available for Integer and Double domains. 
Note that inequality theories over Integer domains are not well supported, due to complications arising from using discrete domains.
Also note that suffix optimization is deactivated for theories with inequalities since they are untested.     

The branch includes the folders:

* 'src' - the RALib source code 
* 'examples' - input configurations for the mul 
    * 'tcp' - contains input files for the actual TCP case study
    * 'succ' - contains successor models taken from [*Tomte*][7] , you can simulate these models 
    using the SUT toot and then learn them using the socket-analyzer front-end
* 'target' - this contains compiled ralib libraries generated by Maven. Note that 
  'ralib-0.1-SNAPSHOT-jar-with-dependencies.jar' is an archive generated for the stable version of RALib that only implemented inequality


Using RALib
-------------------------

RALib can be used as a library from Java. The test cases that come with RALib
demonstrate how this can be done. RALib currently also provides two tools
that can be run from the shell. A 'simulator' for inferring RA models from 
simulated systems (automata) and a 'class analyzer' for inferring RA models
of Java classes. Running

```
#!bash
$ java -ea -jar target/ralib-0.1-SNAPSHOT-jar-with-dependencies.jar
```


will show some help and available options to the tools. Below we provide two
example configurations.

For learning a model of `java.util.LinkedList` with the class-analyzer call

```
#!bash
$ java -ea -jar target/ralib-0.1-SNAPSHOT-jar-with-dependencies.jar \
  class-analyzer -f config
```

with the following `config` file

```
#!bash
target=java.util.LinkedList
methods=push(java.lang.Object:int)boolean:boolean+\
  pop()java.lang.Object:int

logging.level=WARNING
max.time.millis=600000
use.ceopt=true
use.suffixopt=true
use.fresh=false
use.rwalk=true
export.model=true
rwalk.prob.fresh=0.8
rwalk.prob.reset=0.1
rwalk.max.depth=6
rwalk.max.runs=10000
rwalk.reset.count=false
rwalk.draw.uniform=false
teachers=int:de.learnlib.ralib.tools.theories.IntegerEqualityTheory
```

For learning a model of the SIP protocol with the simulator call

```
#!bash
$ java -ea -jar target ralib-0.1-SNAPSHOT-jar-with-dependencies.jar \
  iosimulator -f config
```

with the following `config` file

```
#!bash
target=src/test/resources/de/learnlib/ralib/automata/xml/sip.xml

logging.level=WARNING
max.time.millis=600000
use.eqtest=true
use.ceopt=true
use.suffixopt=true
use.fresh=false
use.rwalk=true
export.model=true
rwalk.prob.fresh=0.8
rwalk.prob.reset=0.1
rwalk.max.depth=100
rwalk.max.runs=10000
rwalk.reset.count=false
rwalk.draw.uniform=false
teachers=int:de.learnlib.ralib.tools.theories.IntegerEqualityTheory
```

The extension also includes two additional tools, a 'socket-analyzer' which learns
a SUT over a socket connection and a 'sul-analyzer', which learns a SUL which implements
the broader SUL class de.learnlib.ralib.tools.sulanalyzer.ConcreteSUL. These extensions 
are only available in the archive 'dist/ralib.jar' (which was compiled based on this experimental branch).

The configuration file to learn TCP was an example of such a file for using the 'sul-anlyzer'.

The configuration file 'inputs/config_sockmoderatetcpfresh' is an example such a file for the 'socket-analyzer'.
This learns the simulated version of the model in 'inputs/succmodels/Succ_TCPModerate.xml'. 

To run, simulate the model using Tomte's SUT tool, ensure ports are consistent, then run:

```
#!bash
$ java -ea -jar dist/ralib.jar socket-analyzer -f inputs/config_sockmoderatetcpfresh

```



[1]: https://bitbucket.org/psycopaths/jConstraints-z3
[2]: https://z3.codeplex.com
[3]: http://www.learnlib.de
[4]: http://www.apache.org/licenses/LICENSE-2.0
[5]: https://bitbucket.org/psycopaths/jConstraints
[6]: https://gitlab.science.ru.nl/pfiteraubrostean/tcp-learner/tree/cav-aec
[7]: http://tomte.cs.ru.nl/